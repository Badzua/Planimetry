function calculateTriangle() {
    const aInput = document.getElementById('triangle-a-input');
    const bInput = document.getElementById('triangle-b-input');
    const cInput = document.getElementById('triangle-c-input');
    const aText = document.getElementById('triangle-a');
    const bText = document.getElementById('triangle-b');
    const cText = document.getElementById('triangle-c');
    
    // Синхронизация значений
    const a = parseFloat(aInput.value);
    const b = parseFloat(bInput.value);
    const c = parseFloat(cInput.value);
    aText.value = a;
    bText.value = b;
    cText.value = c;
    
    const errorElement = document.getElementById('triangle-error');
    
    if (isNaN(a) || isNaN(b) || isNaN(c) || a <= 0 || b <= 0 || c <= 0) {
        errorElement.textContent = 'Ошибка: все стороны должны быть положительными числами';
        return;
    }
    
    const isValid = isValidTriangle(a, b, c);
    const perimeter = a + b + c;
    let area = 0;
    
    if (isValid) {
        area = triangleAreaHeron(a, b, c);
        errorElement.textContent = '';
    } else {
        errorElement.textContent = 'Треугольник не существует: нарушено неравенство треугольника';
    }
    
    // Обновление значений на рисунке
    document.getElementById('triangle-p-value').textContent = isValid ? perimeter.toFixed(1) : '?';
    document.getElementById('triangle-s-value').textContent = isValid ? area.toFixed(1) : '?';
    
    // Обновление результатов
    document.getElementById('triangle-perimeter').textContent = perimeter.toFixed(2);
    document.getElementById('triangle-area').textContent = isValid ? area.toFixed(2) : 'Н/Д';
    document.getElementById('triangle-exists').textContent = isValid ? 'Да' : 'Нет';
}

// Синхронизация полей ввода для треугольника
['triangle-a', 'triangle-b', 'triangle-c'].forEach(id => {
    const input = document.getElementById(id);
    const svgInput = document.getElementById(id + '-input');
    
    if (input && svgInput) {
        input.addEventListener('input', function() {
            svgInput.value = this.value;
            calculateTriangle();
        });
        
        svgInput.addEventListener('input', function() {
            input.value = this.value;
            calculateTriangle();
        });
    }
});
